<!DOCTYPE html>
<html>
<head>
<title>SHOOTER</title>
<link rel="stylesheet" href="shooter.css">
</head>
<body onclick="shot()">
    <div class="object" id="ally" onclick="targetShot(this)"></div>
    <div class="object" id="enemy" onclick="targetShot(this)"></div>
    <div id="score">score: 0</div>
    <div id="reload-message">RELOADING...</div>
    <script>

        var w = window.innerWidth - 200;
        var h = window.innerHeight - 200;
        var score = 0;
        var ally = document.getElementById("ally");
        var enemy = document.getElementById("enemy");
        var reloadMessage = document.getElementById("reload-message");
        var isReloading = false;
        var reloadTime = 1000;

        function targetShot(element){
            if (isReloading){
                return;
            } else if (element.id === "enemy") {
                score += 5;
            } else if (element.id === "ally") {
                score -= 5;
            }
            document.getElementById("score").innerHTML = "score: " + score;
            spawn(element);
            shot();
            reload();
        }
        function reload() {
            isReloading = true;
            reloadMessage.style.display = "block";
            setTimeout(() => {
                reloadMessage.style.display = "none";
                isReloading = false;
            }, reloadTime);
        }
        function shot(){
            if (!isReloading){
              new Audio("gunshot.mp3").play();  
              reload();
            } 
        }

        function movement(element){
            var dx = 6;
            let myInterval = setInterval(function(){
                var x = parseInt(element.style.left);
                var y = element.style.top;

                if(x > w){
                    dx = -dx;
                }
                else if (x < 0){
                    dx = -dx;
                }

                element.style.left = x + dx + "px";
            }, 20);
        }
        function spawn(element){
            element.style.left = Math.floor(Math.random() * w) + "px";
            element.style.top = Math.floor(Math.random() * h) + "px";
        }

        spawn(ally);
        spawn(enemy);
        movement(ally);
        movement(enemy);
    </script>
</body>
</html>
